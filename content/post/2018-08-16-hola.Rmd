---
title: Hola
author: rafa
date: '2018-08-16'
slug: conic-section
categories: []
tags: []
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE)
```



La NBA tiene un eco-sistema alrededor que enriquece muchísimo el producto. En Youtube hay técnicos que analizan la estrategia de los equipos (bballreakdown, coach daniel), gente especializada en analizar los salarios y los contratos y un montón de cosas.

La NBA también fue pionera en el tema de liberar estadísticas, y todos los equipos tienen gente en analytics. De hecho, algunos de los técnicos más exitosos de los últimos años son los que incorporaron los insights de los analytics (Steve Kerr y Brad Stevens por mencionar alguno).

En este post explico como bajar datos de jugadores de la NBA usando un paquete de R para scrapear datos.


```{r script, eval = FALSE}
library(glue)
library(purrr)
library(dplyr)
library(rvest)

# Download data table from basketball reference
get_player_data <- function(year) {
  
  base_nba_url <- "https://www.basketball-reference.com/leagues/NBA_{year}_per_game.html"
  
  glue(base_nba_url) %>% 
    read_html(nba_url) %>% 
    html_table() %>% 
    as.data.frame() %>% 
    as_tibble %>% 
    mutate(Year = year)
}

data <- as.list(2000:2018) %>% 
  purrr::map(get_player_data) %>% 
  purrr::reduce(bind_rows)  %>% 
  mutate_at(vars(G:PS.G, Age), as.numeric) %>% 
  mutate_at(vars(Tm, Pos), factor) 

saveRDS(data, file="nba_data_00_18.rds")
```